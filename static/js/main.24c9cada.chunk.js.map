{"version":3,"sources":["components/form/Form.module.css","components/form/FormNav.module.css","components/item/Checkbox.js","components/item/Radio.js","components/item/Text.js","components/item/Selectbox.js","components/button/Button.js","components/form/FormNav.js","components/form/Form.js","hooks/useFormData.js","App.js","index.js"],"names":["module","exports","h1","section","item","item__title","error","nav","Checkbox","_ref","formType","itemId","options","title","value","copyWithValues","_ref2","optionId","checked","newValue","Object","toConsumableArray","this","Number","objectSpread","validate","includes","getSubmitData","id","answer","reduce","arr","cur","index","push","filter","o","text","join","render","handleChange","_this","react_default","a","createElement","react","map","option","key","type","name","onChange","Radio","_this2","Text","style","width","height","Selectbox","Button","onClick","disabled","className","Nav","step","setStep","lastStep","checkValidation","handleSubmit","styles","Button_Button","Form","_useState","useState","_useState2","slicedToArray","items","setItems","_useFormData","formData","setFormData","useEffect","asyncToGenerator","regenerator_default","mark","_callee","itemConstructors","wrap","_context","prev","next","inputJson","sort","b","stop","apply","arguments","fetchFormData","useFormData","_useState3","_useState4","_useState5","_useState6","isError","setIsError","e","newItems","target","length","body","formId","console","log","JSON","stringify","App","ReactDOM","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.24c9cada.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"h1\":\"Form_h1__eJhDf\",\"section\":\"Form_section__2qOPr\",\"item\":\"Form_item__3odcD\",\"item__title\":\"Form_item__title__2kgTT\",\"error\":\"Form_error__Qtzrm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"FormNav_nav__2rb3P\"};","import React, { Fragment } from 'react';\n\nexport default function Checkbox({ formType, itemId, options, title }) {\n  return {\n    formType,\n    itemId,\n    options,\n    title,\n    value: [],\n\n    copyWithValues({ value: optionId, checked }) {\n      const newValue = [...this.value];\n      newValue[Number(optionId)] = checked;\n\n      return {\n        ...this,\n        value: newValue\n      };\n    },\n\n    validate() {\n      return this.value.includes(true);\n    },\n\n    getSubmitData() {\n      return {\n        id: itemId,\n        answer: this.value\n          .reduce((arr, cur, index) => {\n            if (cur) arr.push(options.filter(o => o.id === index)[0].text);\n\n            return arr;\n          }, [])\n          .join()\n      }\n    },\n\n    render(handleChange) {\n      return (\n        <Fragment>\n          {this.options.map(option => (\n            <label key={option.id}>\n              <input\n                type=\"checkbox\"\n                name={this.itemId}\n                value={option.id}\n                checked={!!this.value[option.id]}\n                onChange={handleChange}\n              />\n              {option.text}\n            </label>\n          ))}\n        </Fragment>\n      )\n    }\n  }\n}","import React, { Fragment } from 'react';\n\nexport default function Radio({ formType, itemId, options, title }) {\n  return {\n    formType,\n    itemId,\n    options,\n    title,\n    value: options[0].id,\n\n    copyWithValues({ value: optionId }) {\n      return {\n        ...this,\n        value: Number(optionId)\n      };\n    },\n\n    validate() {\n      return !!this.value;\n    },\n\n    getSubmitData() {\n      return {\n        id: itemId,\n        answer: options.filter(o => o.id === this.value)[0].text\n      }\n    },\n\n    render(handleChange) {\n      return (\n        <Fragment>\n          {this.options.map(option => (\n            <label key={option.id}>\n              <input\n                type=\"radio\"\n                name={this.itemId}\n                value={option.id}\n                onChange={handleChange}\n                checked={this.value === option.id}\n              />\n              {option.text}\n            </label>\n          ))}\n        </Fragment>\n      )\n    }\n  }\n}","import React from 'react';\n\nexport default function Text({ formType, itemId, options, title }) {\n  return {\n    formType,\n    itemId,\n    options,\n    title,\n    value: '',\n\n    copyWithValues({ value: text }) {\n      return {\n        ...this,\n        value: text\n      };\n    },\n\n    validate() {\n      return !!this.value;\n    },\n\n    getSubmitData() {\n      return {\n        id: itemId,\n        answer: this.value\n      }\n    },\n\n    render(handleChange) {\n      return (\n        <textarea\n          style={{\n            width: '100%',\n            height: '50px'\n          }}\n          type=\"text\"\n          name={this.itemId}\n          onChange={handleChange}\n          value={this.value}\n        />\n      )\n    }\n  }\n}","import React from 'react';\n\nexport default function Selectbox({ formType, itemId, options, title }) {\n  return {\n    formType,\n    itemId,\n    options,\n    title,\n    value: options[0].id,\n\n    copyWithValues({ value: optionId }) {\n      return {\n        ...this,\n        value: Number(optionId)\n      };\n    },\n\n    validate() {\n      return !!this.value;\n    },\n\n    getSubmitData() {\n      return {\n        id: itemId,\n        answer: options.filter(o => o.id === this.value)[0].text\n      }\n    },\n\n    render(handleChange) {\n      return (\n        <select\n          name={this.itemId}\n          onChange={handleChange}\n          value={this.value}\n        >\n          {this.options.map(option => (\n            <option key={option.id} value={option.id}>\n              {option.text}\n            </option>\n          ))}\n        </select>\n      )\n    }\n  }\n}","import React from 'react';\nimport './Button.css';\n\nexport default function Button({ onClick, disabled, text }) {\n  return (\n    <button\n      className=\"btn\"\n      onClick={onClick}\n      disabled={disabled}\n    >\n      {text}\n    </button>\n  )\n}","import React from 'react';\nimport styles from './FormNav.module.css';\nimport Button from '../button/Button';\n\nexport default function Nav({ step, setStep, lastStep, checkValidation, handleSubmit }) {\n  return (\n    <div className={styles.nav}>\n      <Button\n        onClick={() => setStep(step => step - 1)}\n        disabled={step < 1}\n        text=\"이전\"\n      />\n\n      {step !== lastStep &&\n        <Button\n          onClick={() => checkValidation() && setStep(step => step + 1)}\n          disabled={step > lastStep - 1}\n          text=\"다음\"\n        />\n      }\n      {step === lastStep &&\n        <Button\n          onClick={() => checkValidation() && handleSubmit()}\n          disabled={step !== lastStep}\n          text=\"제출\"\n        />\n      }\n    </div>\n  )\n}\n\n","import React, { Fragment, useState } from 'react';\n\nimport styles from './Form.module.css';\nimport { useFormData } from '../../hooks';\nimport Nav from './FormNav'\n\nexport default function Form() {\n  const [items, setItems] = useState([]);\n  const [formData] = useFormData(setItems);\n  const [step, setStep] = useState(0);\n  const [isError, setIsError] = useState(false);\n\n  if (!formData.items) {\n    return false;\n  }\n\n  function handleChange(e) {\n    const newItems = [...items];\n\n    newItems[step] = items[step].copyWithValues({\n      value: e.target.value, // could be optionId or text\n      checked: e.target.checked\n    });\n\n    setItems(newItems);\n  };\n\n  function checkValidation() {\n    if (items[step].validate()) {\n      setIsError(false);\n      return true;\n    }\n\n    setIsError(true);\n    return false;\n  }\n\n  function handleSubmit() {\n    const body = {\n      id: formData.formId,\n      items: items.map(item => item.getSubmitData())\n    };\n\n    // TODO: change this to send body to server\n    console.log(JSON.stringify(body, null, 2));\n  };\n\n  return (\n    <Fragment>\n      <header>\n        <h1 className={styles.h1}>\n          {formData.title}\n        </h1>\n      </header>\n\n      <main className={styles.section}>\n\n        <div className={styles.item}>\n          <h2 className={styles.item__title}>\n            {items[step].title}\n          </h2>\n          {items[step].render(handleChange)}\n        </div>\n\n        {isError && <div className={styles.error}>값을 입력해주세요!</div>}\n\n        <Nav\n          step={step}\n          setStep={setStep}\n          lastStep={formData.items.length - 1}\n          checkValidation={checkValidation}\n          handleSubmit={handleSubmit}\n        />\n\n      </main>\n    </Fragment>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport inputJson from '../assets/input.json';\nimport { Checkbox, Radio, Text, Selectbox } from '../components/item';\n\nexport default function useFormData(setItems) {\n  const [formData, setFormData] = useState({});\n\n  useEffect(() => {\n    const fetchFormData = async () => {\n      // TODO: change this to fetch from server\n      const formData = inputJson;\n\n      // sort items just in case\n      formData.items = formData.items.sort((a, b) => a.itemId > b.itemId);\n\n      // initiate items with their data\n      const itemConstructors = [null, Checkbox, Radio, Text, Selectbox];\n      setItems(\n        formData.items.map(\n          item => itemConstructors[item.formType](item)\n        )\n      );\n\n      setFormData(formData);\n    }\n\n    fetchFormData();\n  }, [setItems]);\n\n  return [formData, setFormData];\n}","import React from 'react';\nimport Form from './components/form/Form';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Form />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}